<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Server - Depex Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            min-height: 100vh;
            color: #fff;
        }
        .header, .main {
            visibility: hidden;
            animation: contentShow 0s linear 3s forwards;
        }

        @keyframes contentShow {
            to { visibility: visible; }
        }
        .header {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            margin-right: 15px;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .add-bot-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            margin: 20px auto;
            text-align: center;
        }

        .add-bot-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .button-container {
            text-align: center;
            margin-bottom: 40px;
        }

        .main {
            padding: 60px 20px;
        }

        .page-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .page-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.1rem;
            margin-bottom: 50px;
        }

        .servers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .server-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: #fff;
        }

        .server-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 15px 50px rgba(102, 126, 234, 0.3);
        }

        .server-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .server-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .server-id {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        .arrow {
            margin-top: 15px;
            font-size: 1.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .server-card:hover .arrow {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .loading-icon {
                font-size: 3.5rem;
            }
            .loading-text {
                font-size: 1.3rem;
                padding: 0 20px;
            }
            .container {
                padding: 0 15px;
            }
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            .header-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
            .lang-btn, .logout-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            .page-title {
                font-size: 1.8rem;
            }
            .page-subtitle {
                font-size: 0.95rem;
            }
            .servers-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .add-bot-btn {
                padding: 12px 25px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.1rem;
            }
            .page-title {
                font-size: 1.5rem;
            }
            .server-card {
                padding: 20px;
            }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 0.6s ease 3s forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        .loading-content {
            text-align: center;
        }

        .loading-icon {
            font-size: 5rem;
            color: #fff;
            margin-bottom: 30px;
            animation: iconGlow 2s ease-in-out infinite;
        }

        @keyframes iconGlow {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 20px rgba(102, 126, 234, 0.5));
            }
            50% {
                transform: scale(1.05);
                filter: drop-shadow(0 0 40px rgba(102, 126, 234, 0.8));
            }
        }

        .loading-text {
            font-size: 2rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 15px;
            letter-spacing: 1px;
            direction: rtl;
        }

        .loading-dots {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .dot {
            width: 14px;
            height: 14px;
            background: #667eea;
            border-radius: 50%;
            animation: dotBounce 1.4s ease-in-out infinite;
        }

        .dot:nth-child(1) { animation-delay: 0s; }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes dotBounce {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.6;
            }
            30% {
                transform: translateY(-20px);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay">
        <div class="loading-content">
            <div class="loading-icon">
                <i class="fas fa-robot"></i>
            </div>
            <div class="loading-text" id="loading-quote"></div>
            <div class="loading-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>

    <script>
        const quotes = [
            'التقنية وسيلة، والصلاة أولوية',
            'الصلاة نور، والتقنية أداة',
            'الصلاة عماد الدين، والتقنية معين',
            'أقم الصلاة قبل كل شيء',
            'الصلاة أولاً، ثم بقية الأمور',
            'الصلاة سكينة القلوب، والتقنية للخدمة',
            'نجح بلا صلاة وهم، والصلاة بركة',
            'الصلاة تاج الرأس، والتقنية للناس'
        ];
        const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById('loading-quote').textContent = randomQuote;
    </script>

    <div class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <span data-en="Depex Dashboard" data-ar="لوحة تحكم ديبكس">Depex Dashboard</span>
                </div>
                <div class="header-buttons">
                    <button class="lang-btn" onclick="toggleLanguage()">
                        <i class="fas fa-language"></i> <span id="lang-text">العربية</span>
                    </button>
                    <a href="/logout" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> <span data-en="Logout" data-ar="تسجيل الخروج">Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="main">
        <div class="container">
            <h1 class="page-title" data-en="Select a Server" data-ar="اختر السيرفر">Select a Server</h1>
            <p class="page-subtitle" data-en="Choose which server you want to configure" data-ar="اختر السيرفر الذي تريد تكوينه">Choose which server you want to configure</p>

            <div class="button-container">
                <a href="https://discord.com/api/oauth2/authorize?client_id=1460760802138128567&permissions=8&scope=bot%20applications.commands" target="_blank" class="add-bot-btn">
                    <i class="fas fa-plus-circle"></i> <span data-en="Add Bot to Server" data-ar="إضافة البوت للسيرفر">Add Bot to Server</span>
                </a>
            </div>

            <div class="servers-grid">
                {% for guild in guilds %}
                <a href="/dashboard/{{ guild.id }}" class="server-card">
                    <div class="server-icon">
                        <i class="fas fa-server"></i>
                    </div>
                    <div class="server-name">{{ guild.name }}</div>
                    <div class="server-id">ID: {{ guild.id }}</div>
                    <div class="arrow">
                        <i class="fas fa-arrow-right"></i>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>

    <script>
        // Load language preference from localStorage
        let currentLang = localStorage.getItem('language') || 'en';

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            localStorage.setItem('language', currentLang);
            updateLanguage();
        }

        function updateLanguage() {
            // Update all elements with data-en and data-ar attributes
            document.querySelectorAll('[data-en]').forEach(element => {
                const text = currentLang === 'en' ? element.getAttribute('data-en') : element.getAttribute('data-ar');
                element.textContent = text;
            });

            // Update language toggle button text
            const langText = document.getElementById('lang-text');
            if (langText) {
                langText.textContent = currentLang === 'en' ? 'العربية' : 'English';
            }

            // Update page direction for Arabic
            document.body.style.direction = currentLang === 'ar' ? 'rtl' : 'ltr';
        }

        // Apply language on page load
        window.addEventListener('DOMContentLoaded', updateLanguage);
    </script>
</body>
</html>
